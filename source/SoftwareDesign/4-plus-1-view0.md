# 【4+1视图】理解4+1视图

作者：wallace-lai <br>
发布：2024-07-13 <br>
更新：2024-10-03 <br>

# 介绍

![4plus1](../media/images/SoftwareDesign/4plus1-0.png)

软件架构的4+1视图分别为：

（1）Logical View

利益相关人：End User

视图关注点：Functionality

（2）Implementation View

利益相关人：Programmers

视图关注点：Software Management

（3）Process View

利益相关人：System Integrators

视图关注点：

- Performance
- Scalability
- Throughput

（4）Deployment View

利益相关人：System Engineering

视图关注点：

- System Topology
- Communications

（5）场景视图

## 二、理解4+1视图的常见问题

### 2.1 为什么要高出这么多个视图？用一个不行吗？

软件架构设计要考虑的点很多，比如我们要考虑软件最终用户、设计人员、开发人员的需求等，同一张图很难将众多的需求给表示出来；

软件开发过程中，涉及了几大类利益相关人。每一类利益相关人的关注点是不一样的，因此，用不同的视图来描述这些关注点。

### 2.2 为什么要叫4+1试图，直接叫5大试图不行吗？

四个视图是从不同的角度来进行软件架构的设计，而场景视图更多是一种需求的抽象，严格来讲不能算是软件架构设计的内容。场景视图是软件架构设计的输入，驱动另外四个视图的设计。在架构设计的后期，可以用场景视图来验证另外四个视图设计的正确性（是否能实现需求）。

### 2.3 每种试图分别该用哪种表示法来描绘？

没有严格的限制说每种视图必须用哪种表示方法来描绘，只要能将当前视图的关注点给表示清楚即可。

## 三、各视图的关注点

### 3.1 逻辑视图

（1）系统功能

（2）类和对象的分解

### 3.2 过程视图
（1）并发和同步特性

（2）任何（进程或者线程）和任务之间的配合关系

### 3.3 实现视图

（1）软件在其开发环境中的静态组织结构

（2）模块和子系统的划分


### 3.4 部署视图

（1）软件和硬件的映射关系


### 3.5 用例（场景）视图

（1）重要的需求抽象


## 四、论文走读

4+1视图是非常通用的，可以使用其他的表示方法和工具，可以使用其他的设计方法，特别是在进行逻辑和过程分解的时候。

### 4.1 逻辑视图

逻辑视图主要用于功能需求：系统应该向用户提供什么服务。系统被分解为一组主要来自问题领域的关键抽象，这些抽象的形式是对象或者对象类别。（这是面向对象的设计方法）

除了面向对象方法，以数据驱动为主的应用程序可以使用其他形式的逻辑视图，比如E-R图。

**逻辑视图的表示法**

如果是使用面向对象的设计方法的话，那么最常用的逻辑视图表示方法是**类图**。**类图最常用的绘制工具是统一建模语言UML**。

### 4.2 过程视图

过程视图考虑一些非功能需求，比如性能和可靠性。它解决并发性、分布式、系统完整性、容错等问题。以及逻辑视图中的主要抽象如何应用到过程架构中，即：对象操作实际在哪个控制任务上执行。

**过程视图的表示法**：对于过程视图的表示方法，常用的有UML中的序列图（稍微更合理的表示方法）、活动图、状态图。**序列图可以表示任务之间的交互，但具体对象的实际操作在哪个任务上执行可能更适合用文字来描述**。

### 4.3 开发视图

开发视图聚焦于软件模块在实际开发环境中如何组织。软件被分割成程序库或者子系统这样的小块，使得程序库或者子系统可以分给一个或者少数几个开发者来开发。子系统以分层（layer）的形式组织，每一层都为它的上层提供一个小范围的、定义好的接口。

**开发视图的表示法**：开发视图的常用表示法是**组件图**。


### 4.4 物理视图

物理视图着眼于建立软件和硬件的映射关系。物理架构考虑系统的非功能需求，比如：系统可用性、可靠性（容错）、性能和可扩展性。

软件在一个计算机网络或者处理节点上执行。各种已定义的元素（网络、进程、任务、对象）必须被映射到不同的节点上。

**物理视图的表示法**：物理视图的表示用部署图即可

### 4.5 用例（场景）视图

用例是一组场景的集合，具体而言，用例是一组有共同用户目标的场景的集合。

场景是最重要的需求的抽象，其扮演了两个重要的角色：

（1）驱动我们在架构设计中去发现架构元素；

（2）当架构设计完成后，验证和证实已完成的架构；

前面四个视图描述的是系统的设计，而用例视图描述的是系统的需求的抽象。通过将需求抽象成用例和场景，作为系统设计的输入。

**用例视图的表示法**：用例视图的表示使用用例图即可。

### 4.6 裁剪模型

不是所有的软件架构都需要完整的4+1视图。架构描述时可以将没什么用的视图给省略掉。比如：

（1）如果只有一个处理器而且只有一个进程或程序时，可以省略过程视图；

（2）对于非常小的系统，逻辑视图和开发视图可能都是一样的，那就没有必要分开描述；

（3）但场景视图在任何情况下都是有用的；


### 总结

|视图|逻辑|过程|开发|物理|场景|
|--|--|--|--|--|--|
|组件|类|任务|模块、子系统|节点|步骤、脚本|
|连接器|关联、继承、包含|消息、广播、RPC等|编译依赖|通信介质、局域网、广域网、总线等||
|容器|类的类别|进程|子系统（库）|物理子系统|Web|
|利益相关人|最终用户|系统设计人员、集成人员|开发人员、项目经理|系统设计人员|最终用户、开发人员|
|关注点|功能|性能、可用性、软件容错、完整性|组织、可复用性、可移植性、产品线|可扩展性、性能、可用性|可理解性|

## 五、用例视图案例

假设用户需求如下：

功能需求：

（1）支持查看设备状态；

（2）支持发送设备调试命令；

非功能需求：

（1）支持多人（2、3人）同时调试

则初步的用例图可以是以下的形式：

![用例视图1](../media/images/SoftwareDesign/4plus1-1.png)

假设和用户交流后，客户对需求新增了一些约束：

（1）设备状态只能由专门的数据采集器进行采集；

（2）设备只支持通过RS232串口接收调试命令；

则用例视图需要更新为：

![用例视图2](../media/images/SoftwareDesign/4plus1-2.png)

设备调试系统案例的启示：

（1）客户提需求，通常不是一次就能提清楚的，需要在设计过程多个环节多次交流确认；

（2）在用例视图阶段、我们跟客户交流的重点：

- 重要功能有没有遗漏
- 系统边界是否合理


## 六、逻辑视图案例

## 七、过程视图案例

## 八、实现视图和部署视图案例