# 【CppCoreGuidelines】Performance

作者：wallace-lai <br/>
发布：2024-02-25 <br/>
更新：2024-02-25 <br/>

真正的问题是，程序员们花了太多的时间在错误的地方和错误的时间里担心效率问题；过早优化是编程中的万恶之源（或者至少是其中大部分罪恶之源）。

———《计算机程序设计艺术》 高德纳

## 一、错误的优化

### 规则1：不要无故优化

### 规则2：不要过早进行优化

### 规则3：不要优化并非性能关键的东西

总之，过早优化是编程中的万恶之源。在进行任何性能假设之前，请使用最关键的规则来进行性能分析，即：**测量程序的性能**。

没有性能数据，你如何确定以下问题的答案：

（1）程序的哪一部分是瓶颈？

（2）对用户来说，多快算好？

（3）程序能有多快？

须知，在错误（性能）假设的基础上进行优化是一个典型的错误模式。

## 二、错误的假设

### 规则4：不要假设复杂的代码一定比简单的快

### 规则5：不要假设低级代码一定比高级代码快

### 规则6：不要在没有测量的情况下对性能妄下断言

以上规则都是为了应对错误的（性能）假设，各种对性能想当然的臆测很可能都是错误的。

## 三、启用优化

可以使用Compiler Explorer工具来查看代码生成的汇编指令，这是查比较代码性能好坏的决定性因素。

### 规则7：设计应当允许优化

未完待续

## 四、相关规则